---
interface Props {
  address: string;
  licenses: string[];
  ctaText: string;
}

const { address, licenses, ctaText } = Astro.props as Props;

const ctaMatch = ctaText.match(/^(.*?)(?:（(.*)）)?$/);
const ctaLabel = ctaMatch?.[1]?.trim() || '相談する';
const ctaNote = ctaMatch?.[2]?.trim() || 'お問い合わせフォームは準備中です。';

const basePath = import.meta.env.BASE_URL.replace(/\/$/, '');
const toPublicPath = (path: string) => `${basePath}${path}`;
---

<section id="contact" class="section-space bg-white">
  <div class="site-container">
    <p class="section-eyebrow">Contact</p>
    <h2 class="section-title">お問い合わせ</h2>
    <p class="section-summary">
      計画相談、設計監理、AI導入のご相談は以下をご確認ください。現在、お問い合わせフォームは準備中です。
    </p>

    <div class="mt-12 grid gap-6 lg:grid-cols-[1fr,1fr]">
      <div class="photo-frame">
        <img src={toPublicPath('/assets/contact-space.jpg')} alt="オフィスイメージ" class="h-full min-h-80 w-full object-cover" data-parallax data-parallax-speed="0.08" loading="lazy" />
      </div>

      <div class="soft-card p-6 sm:p-8">
        <h3 class="text-2xl font-semibold text-surface-900">所在地・登録情報</h3>
        <p class="mt-4 text-sm text-surface-700">{address}</p>

        <ul class="mt-6 space-y-2 text-sm text-surface-700">
          {licenses.map((item) => (
            <li class="flex items-start gap-2.5">
              <span class="mt-2 h-1.5 w-1.5 rounded-full bg-accent-500"></span>
              <span>{item}</span>
            </li>
          ))}
        </ul>

        <div class="mt-8 rounded-2xl border border-surface-200 bg-surface-50 p-4 text-sm text-surface-600">
          <p>お問い合わせフォーム: 準備中</p>
          <p class="mt-1">メール窓口: 準備中</p>
          <p class="mt-3 text-xs">{ctaNote}</p>
        </div>

        <button
          type="button"
          class="mt-6 inline-flex items-center justify-center rounded-full border border-surface-300 px-6 py-3 text-sm font-medium text-surface-700"
          disabled
          aria-disabled="true"
        >
          {ctaLabel}
        </button>

        <a href="/security-policy" class="mt-5 block text-sm font-medium text-primary-600 hover:text-primary-500">
          情報セキュリティ基本方針を見る
        </a>
      </div>
    </div>
  </div>
</section>
