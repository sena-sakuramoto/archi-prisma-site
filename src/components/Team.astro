---
import type { TeamData } from '../lib/content';

interface Props {
  team: TeamData;
}

const { team } = Astro.props as Props;
const basePath = import.meta.env.BASE_URL.replace(/\/$/, '');
const toPublicPath = (path: string) => `${basePath}${path}`;
const imageSrc = (path?: string) => (path ? toPublicPath(path) : undefined);
---

<section id="team" class="section-space bg-white">
  <div class="site-container">
    <p class="section-eyebrow">Team</p>
    <h2 class="section-title">チーム</h2>
    <p class="section-summary">
      コアメンバーを中心に、顧問・協力デザイナーと連携しながらプロジェクトを推進します。
    </p>

    <div class="mt-12 grid gap-6 sm:grid-cols-2 xl:grid-cols-5">
      {team.core.map((member) => {
        const portrait = imageSrc(member.image);
        return (
          <article class="soft-card overflow-hidden">
            {portrait && (
              <img src={portrait} alt={`${member.name}の写真`} class="aspect-[4/5] w-full object-cover" loading="lazy" />
            )}
            <div class="p-5">
              <h3 class="text-2xl font-semibold text-surface-900">{member.name}</h3>
              <p class="mt-1 text-sm text-surface-500">{member.role}</p>
              {member.license && <p class="mt-3 text-xs text-surface-600">{member.license}</p>}
              {member.notes && <p class="mt-3 text-sm text-surface-700">{member.notes}</p>}
            </div>
          </article>
        );
      })}
    </div>

    <div class="mt-10 grid gap-6 lg:grid-cols-2">
      <article class="soft-card p-6">
        <h3 class="text-2xl font-semibold text-surface-900">顧問</h3>
        <ul class="mt-4 space-y-4">
          {team.advisory_legacy.map((member) => (
            <li class="border-t border-surface-200 pt-4">
              <p class="text-lg font-medium text-surface-900">{member.name}</p>
              <p class="text-sm text-surface-600">{member.notes ?? member.role}</p>
            </li>
          ))}
        </ul>
      </article>

      <article class="soft-card p-6">
        <h3 class="text-2xl font-semibold text-surface-900">協力デザイナー</h3>
        <ul class="mt-4 space-y-4">
          {team.collaborators.map((member) => (
            <li class="border-t border-surface-200 pt-4">
              <p class="text-lg font-medium text-surface-900">{member.name}</p>
              <p class="text-sm text-surface-600">{member.role}</p>
            </li>
          ))}
        </ul>
      </article>
    </div>
  </div>
</section>
